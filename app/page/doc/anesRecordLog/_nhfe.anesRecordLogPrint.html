<div class="print-progress">
    <progressbar></progressbar>
</div>
<div>
    <div layout='column' class="anes_Record_nhfe print" ng-repeat="page in vm.PAGES" repeat-finish="vm.pageFinish()" >
        <main>
            <header class="compact text-center">
                <img ng-if='vm.docInfo.showImgTitle' src="../../../img/syzxyy.png" style="height: 60px; margin-left: -50px;">
                <h3 ng-if='!vm.docInfo.showImgTitle&&vm.docInfo.beName'>{{vm.docInfo.beName}}</h3>
                <h4 ng-if='!vm.docInfo.showImgTitle&&vm.docInfo.subName'>{{vm.docInfo.subName}}</h4>
                <h4>麻&nbsp;醉&nbsp;记&nbsp;录&nbsp;单</h4>
            </header>
            <div layout layout-align="space-between center" class="form-group">
                <div>
                    <span class="text-center">{{vm.startOper.regOpt.operaDate.split('-')[0]}}</span>年
                    <span class="text-center">{{vm.startOper.regOpt.operaDate.split('-')[1]}}</span>月
                    <span class="text-center">{{vm.startOper.regOpt.operaDate.split('-')[2]}}</span>日
                </div>
                <div><span class="text-center">{{vm.startOper.anaesRecord.operRoomName}}</span></div>
                <div>科室：<span class="text-center">{{vm.startOper.regOpt.deptName}}</span></div>
                <div>床号：<span class="text-center">{{vm.startOper.regOpt.bed}}</span></div>
                <div>住院号：<span class="text-center">{{vm.startOper.regOpt.hid}}</span></div>
            </div>
            <article>
                <div class="head box">
                    <div layout layout-align="space-between center" class="form-group">
                        <div>姓名<span class="unline text-center">{{vm.startOper.regOpt.name}}</span></div>
                        <div>性别<span class="unline text-center">{{vm.startOper.regOpt.sex}}</span></div>
                        <div>年龄<span class="unline text-center">{{vm.startOper.regOpt.age ? vm.startOper.regOpt.age + '岁' : ''}}{{vm.startOper.regOpt.ageMon ? vm.startOper.regOpt.ageMon + '月' : ''}}{{vm.startOper.regOpt.ageDay ? vm.startOper.regOpt.ageDay + '天' : ''}}</span></div>
                        <div>身高<span class="unline text-center">{{vm.startOper.regOpt.height}}</span>cm</div>
                        <div>体重<span class="unline text-center">{{vm.startOper.regOpt.weight}}</span>kg</div>
                    </div>
                    <div layout>
                        <div flex>
                            <div layout class="form-group">
                                <div flex layout layout-align="start center">
                                    术前诊断<span flex class="unline">{{vm.startOper.regOpt.diagnosisName}}</span>
                                </div>
                                <div layout flex=15 layout-align="start center" class="ml-10 mr-10">
                                    手术分类
                                    <select flex ng-model="vm.startOper.anaesRecord.optLevel" ng-options="i as i for i in vm.optLevelList" style="min-width: 15px;padding-left: 30px"></select>
                                </div>
                                <div layout flex=15 layout-align="start center" class="ml-10 mr-10">
                                    ASA
                                    <select flex ng-model="vm.startOper.anaesRecord.asaLevel" ng-options="i.codeValue as i.codeName for i in vm.asaLevel" style="min-width: 15px;padding-left: 30px"></select>
                                    <checkbox ng-model="vm.startOper.anaesRecord.asaLevelE" ng-true-value='true' ng-false-value='false' class='ml-10'>E</checkbox>
                                </div>
                            </div>
                            <div layout class="form-group">
                                <div flex layout layout-align="start center">
                                    拟施手术<span flex class="unline">{{vm.startOper.regOpt.designedOptName}}</span>
                                </div>
                                <div layout flex=15 layout-align="start center" class="ml-10 mr-10">
                                    麻醉分级
                                    <select flex ng-model="vm.startOper.anaesRecord.anaesLevel" ng-options="i.codeValue as i.codeName for i in vm.anaesLevel" style="min-width: 15px;padding-left: 30px">
                                    </select>
                                </div>
                            </div>
                            <div layout class="form-group">
                                <div flex layout>
                                    麻醉方法<span flex class="unline">{{vm.startOper.regOpt.designedAnaesMethodName}}</span>
                                </div>
                                <div layout layout-align="start center" class="optBody ml-10 mr-10">
                                    手术体位<span flex class="unline">{{vm.startOper.anaesRecord.optBodyStr}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="body" layout>
                    <ul flex>
                        <li layout class="h-group">
                            <div class="left text-center">时间</div>
                            <div flex ng-repeat='i in [0, 1, 2, 3, 4, 5, 6, 7]'><span> {{page.timeArr49[page.view.pageCur][i*6][3].formatTime}}   <!-- {{page.xTits[i]}} --></span></div>
                        </li>
                        <li layout class="h-group">
                            <div class="left" layout>
                                <!-- fdgdf -->
                                <ul flex>
                                    <li layout layout-align='space-between center' ng-repeat='i in vm.monOpt.mmhg track by $index' class="noborder">
                                        <div flex class="text-center">{{vm.monOpt.kpa[$index]}}</div>
                                        <div flex class="text-center">{{vm.monOpt.c[$index]}}</div>
                                        <div flex class="text-center">{{vm.monOpt.mmhg[$index]}}</div>
                                    </li>
                                </ul>
                            </div>
                            <div flex class="mon-point">
                                <!--  <div e-chart class="echarts" e-config="vm.monECfg" e-option="page.monEOpt"></div> -->
                                <div e-chart class="echarts" e-config="vm.monECfg" style="height: 408px" e-option="page.monEOpt1"></div>
                            </div>
                        </li>
                        <li layout class="h-group">
                            <div class="left text-center">标&nbsp;记</div>
                            <div flex>
                                <!-- <div e-chart class="echarts" e-config="vm.markECfg" e-option="page.markEOpt"></div> -->
                                <div e-chart class="echarts" e-config="vm.markECfg" e-option="page.markEOpt1"></div>
                            </div>
                        </li>
                        <li layout class="h-group">
                            <div class="left text-center">O<sub>2</sub>&nbsp;L/min</div>
                            <div flex ng-repeat='i in [0, 1, 2, 3, 4, 5, 6, 7]' class="inputs" >
                                <input type="number" ng-repeat="j in page.monDataList[i * 6].monitorDataList | filter: { observeId: '50021' }:vm.eq" ng-model="j.value" ng-value="j.value">
                            </div>
                        </li>
                        <li layout class="h-group">
                            <ul class="left">
                                <!-- 麻醉药 -->
                                <li layout ng-if="vm.medECfg.mzArr.length>0">
                                    <div layout layout-align='center center' class="v-aside box-right"> {{vm.medECfg.mzyName}}</div>
                                    <ul flex ng-click="vm.ev_pharmacy()">
                                        <li ng-repeat='i in  vm.medECfg.mzArr' class="medName">
                                            <span>
                                        {{vm.startOper.anaesMedEvtList[i].name}} &nbsp; {{vm.startOper.anaesMedEvtList[i].durable == '0' ? vm.startOper.anaesMedEvtList[i].medicalEventList[0].dosageUnit : vm.startOper.anaesMedEvtList[i].medicalEventList[0].showOption == '1' ? vm.startOper.anaesMedEvtList[i].medicalEventList[0].flowUnit : (vm.startOper.anaesMedEvtList[i].medicalEventList[0].showOption == '2' ? vm.startOper.anaesMedEvtList[i].medicalEventList[0].thicknessUnit : vm.startOper.anaesMedEvtList[i].medicalEventList[0].dosageUnit)}}</span>
                                        </li>
                                    </ul>
                                </li>
                                <!-- 治疗药 -->
                                <li layout ng-if="vm.medECfg.zlArr.length>0">
                                    <div layout layout-align='center center' class="v-aside box-right">{{vm.medECfg.zlyName}}</div>
                                    <ul flex ng-click="vm.ev_pharmacy()">
                                        <li ng-repeat='i in  vm.medECfg.zlArr' class="medName">
                                            <span>
                                        {{vm.startOper.treatMedEvtList[i].name}} &nbsp; {{vm.startOper.treatMedEvtList[i].durable == '0' ? vm.startOper.treatMedEvtList[i].medicalEventList[0].dosageUnit : vm.startOper.treatMedEvtList[i].medicalEventList[0].showOption == '1' ? vm.startOper.treatMedEvtList[i].medicalEventList[0].flowUnit : (vm.startOper.treatMedEvtList[i].medicalEventList[0].showOption == '2' ? vm.startOper.treatMedEvtList[i].medicalEventList[0].thicknessUnit : vm.startOper.treatMedEvtList[i].medicalEventList[0].dosageUnit)}}</span>
                                        </li>
                                    </ul>
                                </li>
                                <!-- 输液情况 -->
                                <li layout ng-if="vm.medECfg.syArr.length>0">
                                    <div layout layout-align='center center' class="v-aside box-right">{{vm.medECfg.syName}}</div>
                                    <ul flex ng-click="vm.ev_pharmacy()">
                                        <li ng-repeat='i in  vm.medECfg.syArr' class="medName">
                                            <span>{{vm.startOper.inIoeventList[i] && vm.startOper.inIoeventList[i].ioeventList[0].blood != '' ? vm.startOper.inIoeventList[i].name + '(血型:' + vm.startOper.inIoeventList[i].ioeventList[0].blood + ')' : vm.startOper.inIoeventList[i].name}} &nbsp; {{vm.startOper.inIoeventList[i].ioeventList[0].dosageUnit}}</span>
                                        </li>
                                    </ul>
                                </li>
                                <!-- 输血情况 -->
                                <!-- 出量情况 -->
                                <li layout ng-if="vm.medECfg.clArr.length>0">
                                    <div layout layout-align='center center' class="v-aside box-right">{{vm.medECfg.oName}}</div>
                                    <ul flex ng-click="vm.ev_pharmacy()">
                                        <li ng-repeat='i in  vm.medECfg.clArr' class="medName">
                                            <span>{{vm.startOper.outIoeventList[i].name}} &nbsp; {{vm.startOper.outIoeventList[i].egressList[0].dosageUnit}}</span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            <div flex>
                                <div e-chart class="echarts" style="height: {{vm.medECfg.sum * 15 + 3}}px" e-config="vm.medECfg" e-option="page.medEOpt1"></div>
                            </div>
                        </li>
                        <li layout class="h-group">
                            <div layout layout-align='center center' class="v-aside-1">监测</div>
                            <ul flex>
                                <li layout class="text-center h-group v-aside-2" ng-repeat='i in [0, 1, 2, 3, 4]'>
                                    <div class="text-center v-aside-tit">{{vm.startOper.leftShowList[i].eventName}}</div>
                                    <div flex ng-repeat='j in [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]' class="inputs">
                                        <input type="number" ng-if="vm.startOper.leftShowList[i] && vm.monDataList[j * 3].monitorDataList[i + 1]&&vm.startOper.leftShowList[i].eventName!='ECG'" ng-model="vm.monDataList[j * 3].monitorDataList[i + 1].value" ng-value="vm.monDataList[j * 3].monitorDataList[i + 1].value" ng-blur="vm.saveMon(vm.monDataList[j * 3].monitorDataList[i + 1])" />
                                        <select ng-if="vm.startOper.leftShowList[i] && page.monDataList[j * 3].monitorDataList[i + 1]&&vm.startOper.leftShowList[i].eventName=='ECG'" ng-model="page.monDataList[j * 3].monitorDataList[i + 1].value" ng-options="i.codeValue as i.codeName for i in ecg">
                                            <option></option>
                                        </select>
                                    </div>
                                </li>
                            </ul>
                        </li>
                        <li layout class="h-group">
                            <div flex layout class="remark">
                                <div layout layout-align='center center' class="box-right v-aside">备注</div>
                                <div flex layout='column'>
                                    <div flex layout-wrap layout='column' class="backList">
                                        <div flex ng-repeat="i in page.backList">
                                            <span ng-if="i.isTitle" class="title">-----------{{i.name}}-----------</span>
                                            <span ng-if="i.eventName == 'eventList'">{{$index}}、{{i.occurTime | date: 'HH:mm'}}&nbsp;{{i.codeName}}</span>
                                            <span ng-if="i.eventName == 'anaesevent'">{{$index}}、{{i.occurTime | date: 'HH:mm'}}&nbsp;{{i.codeName}}</span>
                                            <span ng-if="i.eventName == 'anaesMedevent'">{{i.startTime | date: 'HH:mm'}}{{i.endTime ? '~' : ''}}{{i.endTime ? i.endTime : '' | date: 'HH:mm'}}&nbsp;{{i.name}}&nbsp;{{i.dosage + i.dosageUnit}}</span>
                                            <span ng-if="i.eventName == 'medicalevent'">{{i.startTime | date: 'HH:mm'}}{{i.endTime ? '~' : ''}}{{i.endTime ? i.endTime : '' | date: 'HH:mm'}}&nbsp;{{i.name}}&nbsp;{{i.dosage + i.dosageUnit}}</span>
                                            <span ng-if="i.eventName == 'egress'">{{i.startTime | date: 'HH:mm'}}&nbsp;{{i.name}}&nbsp;{{i.value + i.dosageUnit}}</span>
                                            <span ng-if="i.eventName == 'ctlBreath'">{{i.startTime | date: 'HH:mm'}}&nbsp;{{i.type == 1 ? "自主呼吸" : ((i.type == 2) ? "辅助呼吸" : ((i.type == 3) ? "控制呼吸" : ""))}}</span>
                                            <span ng-if="i.eventName == 'shiftChange'">{{i.shiftChangeTime | date: 'HH:mm'}}&nbsp;交班人:{{i.shiftChangedPeople}},接班人:{{i.shiftChangePeople}}</span>
                                            <span ng-if="i.eventName == 'infusioni'">{{i.startTime | date: 'HH:mm'}}{{i.endTime ? ('~' + i.endTime | date: 'HH:mm') : ''}}&nbsp;{{i.name}}&nbsp;{{i.dosageAmount + i.dosageUnit}}</span>
                                            <span ng-if="i.eventName == 'infusionList'">{{i.startTime | date: 'HH:mm'}}{{i.endTime ? ('~' + i.endTime | date: 'HH:mm') : ''}}&nbsp;{{i.name}}&nbsp;{{i.dosageAmount + i.dosageUnit}}</span>
                                            <span ng-if="i.eventName == 'bloodList'">{{i.startTime | date: 'HH:mm'}}~{{i.endTime | date: 'HH:mm'}}&nbsp;{{i.name}}&nbsp;{{i.blood ? '血型:' + i.blood : ''}}&nbsp;{{i.dosageAmount + i.dosageUnit}}</span>
                                            <span ng-if="i.eventName == 'checkeventList'">{{i.occurTime | date: 'HH:mm'}}&nbsp;{{i.cheEventName}}</span>
                                            <span ng-if="i.eventName == 'checkdetail'">{{i.name}} {{i.value}}{{i.dosageUnit}}</span>
                                            <span ng-if="i.eventName == 'otherevent'">{{i.startTime | date: 'HH:mm'}}&nbsp;{{i.title}}</span>
                                            <span ng-if="i.eventName == 'rescueevent'">{{i.startTime | date: 'HH:mm'}}&nbsp;{{i.model == 'save' ? '抢救模式' : '普通模式'}}</span>
                                            <span ng-if="i.analgesicMethod.length > 0">{{i.analgesicMethod}}</span>
                                            <span ng-if="i.flow.length > 0">{{i.flow}}</span>
                                            <span ng-if="i.eventName == 'analgesicMedEvt'">{{i.name + i.dosage + i.dosageUnit}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <div class="rightarea" layout="column">
                        <div style="height: 427px" layout="column" class="box ev-icon box-top">
                            <div layout layout-align="space-between center">麻醉开始<img src="../../../img/ico-mzsz-2.png"></div>
                            <div layout layout-align="space-between center">置管<img src="../../../img/ico-qgcg-2.png"></div>
                            <div layout layout-align="space-between center">手术开始<img src="../../../img/ico-ssks-2.png"></div>
                            <div layout layout-align="space-between center">手术结束<img src="../../../img/ico-ssjs-2.png"></div>
                            <div layout layout-align="space-between center">拔管<img src="../../../img/ico-qgbg-2.png"></div>
                            <div layout layout-align="space-between center" ng-repeat="(k, i) in vm.startOper.showList">
                                {{i.eventName}}<i ng-class='{true:"active"}[vm.szjcKey == k]'><img ng-src="{{i.iconId.split('.')[0] + '-2.' + i.iconId.split('.')[1]}}"></i>
                            </div>
                            <div flex></div>
                        </div>
                        <div layout='column' flex layout-align="space-between center" class="box ev-icon box-top">
                            <div flex>
                                <div layout layout-align="space-between center">
                                    <label>入室</label>
                                    <input datetimepicker="" class='unline' name="rsTime" dateID="rs-time" ng-model="i.strTime" datepicker="false" format="H:i" ng-repeat="i in vm.startOper.eventList | filter: { code: 1 }:vm.eq" ng-init="vm.event.rs = i"></input>
                                    <a  style="width:41px" ng-click='vm.time_watch(1)' ng-if="(vm.startOper.eventList | filter: { code: 1 }:vm.eq).length == 0" class='unline'>&nbsp;</a>
                                </div>
                                <div layout layout-align="space-between center">
                                    <label>麻醉开始</label>
                                    <input datetimepicker="" class='unline' name="mzksTime" dateID="mzks-time" ng-model="i.strTime" datepicker="false" format="H:i" ng-repeat="i in vm.startOper.eventList | filter: { code: 2 }:vm.eq" ng-init="vm.event.mzks = i"></input>
                                    <a  style="width:41px" ng-click='vm.time_watch(2)' ng-if="(vm.startOper.eventList | filter: { code: 2 }:vm.eq).length == 0" class='unline'>&nbsp;</a>
                                </div>
                                <div layout layout-align="space-between center">
                                    <label>气管插管</label>
                                    <input datetimepicker="" class='unline' name="zgTime" dateID="zg-time" ng-model="i.strTime" datepicker="false" format="H:i" ng-repeat="i in vm.startOper.eventList | filter: { code: 3 }:vm.eq" ng-init="vm.event.zg = i"></input>
                                    <a  style="width:41px" ng-click='vm.time_watch(3)' ng-if="(vm.startOper.eventList | filter: { code: 3 }:vm.eq).length == 0" class='unline'>&nbsp;</a>
                                </div>
                                <div layout layout-align="space-between center">
                                    <label>手术开始</label>
                                    <input datetimepicker="" class='unline' name="ssksTime" dateID="ssks-time" ng-model="i.strTime" datepicker="false" format="H:i" ng-repeat="i in vm.startOper.eventList | filter: { code: 4 }:vm.eq" ng-init="vm.event.ssks = i"></input>
                                    <a  style="width:41px" ng-click='vm.time_watch(4)' ng-if="(vm.startOper.eventList | filter: { code: 4 }:vm.eq).length == 0" class='unline'>&nbsp;</a>
                                </div>
                                <div layout layout-align="space-between center">
                                    <label>手术结束</label>
                                    <input datetimepicker="" class='unline' name="ssjsTime" dateID="ssjs-time" ng-model="i.strTime" datepicker="false" format="H:i" ng-repeat="i in vm.startOper.eventList | filter: { code: 5 }:vm.eq" ng-init="vm.event.ssjs = i"></input>
                                    <a  style="width:41px" ng-click='vm.time_watch(5)' ng-if="(vm.startOper.eventList | filter: { code: 5 }:vm.eq).length == 0" class='unline'>&nbsp;</a>
                                </div>
                                <div layout layout-align="space-between center">
                                    <label>拔管</label>
                                    <input datetimepicker="" class='unline' name="bgTime" dateID="bg-time" ng-model="i.strTime" datepicker="false" format="H:i" ng-repeat="i in vm.startOper.eventList | filter: { code: 6 }:vm.eq" ng-init="vm.event.bg = i"></input>
                                    <a  style="width:41px" ng-click='vm.time_watch(6)' ng-if="(vm.startOper.eventList | filter: { code: 6 }:vm.eq).length == 0" class='unline'>&nbsp;</a>
                                </div>
                                <div layout layout-align="space-between center">
                                    <label>出室去向</label>
                                    <span class="unline text-center" style="width: 41px;" ng-repeat="i in vm.leaveTo" ng-if="i.codeValue == vm.startOper.anaesRecord.leaveTo">{{i.codeName}}</span>
                                </div>
                                <div layout layout-align="space-between center">
                                    <label>出室</label>
                                    <input datetimepicker="" class='unline' name="csTime" dateID="cs-time" ng-model="i.strTime" datepicker="false" format="H:i" ng-repeat="i in vm.startOper.eventList | filter: { code: 9 }:vm.eq" ng-init="vm.event.cs = i"></input>
                                    <a  style="width:41px" ng-if="(vm.startOper.eventList | filter: { code: 9 }:vm.eq).length == 0" class='unline'>&nbsp;</a>
                                </div>
                            </div>
                            <div flex layout="column" layout-align="end stretch" style="width: 100%">
                                <div>
                                    总输液量：
                                    <br>
                                    <strong class="unline" style="min-width: 50px;display: inline-block;">{{vm.IOAmout.infusion}}</strong>ml</div>
                                <div>
                                    总输血量：
                                    <br>
                                    <strong ng-if="vm.IOAmout.blood" class="unline" style="min-width: 50px;display: inline-block;">{{vm.IOAmout.blood}}</strong>ml
                                    <strong ng-if="vm.IOAmout.bloodDetail" class="unline" style="min-width: 50px;display: inline-block;">{{vm.IOAmout.bloodDetail}}</strong></div>
                                <div>
                                    总失血量：
                                    <br>
                                    <strong class="unline" style="min-width: 50px;display: inline-block;">{{vm.IOAmout.bleeding}}</strong>ml</div>
                                <div>
                                    总尿量：
                                    <br>
                                    <strong class="unline" style="min-width: 50px;display: inline-block;">{{vm.IOAmout.urine}}</strong>ml</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="foot">
                    <div class="box box-top">
                        <div layout class="form-group">
                            <div flex layout class="mr-10">
                                术后诊断<span flex class="unline">{{vm.startOper.optLatterDiagStr}}</span>
                            </div>
                            <div flex layout>
                                实施手术<span flex class="unline">{{vm.startOper.optRealOperStr}}</span>
                            </div>
                        </div>
                        <div layout>
                            <div flex layout>
                                麻醉医生<span flex class="unline">{{vm.startOper.anesDocStr}}</span>
                            </div>
                            <div flex layout>
                                手术医生<span flex class="unline">{{vm.startOper.operatDocStr}}</span>
                            </div>
                            <div flex layout>
                                洗手护士<span flex class="unline">{{vm.startOper.instruNurseStr}}</span>
                            </div>
                            <div flex layout>
                                巡回护士<span flex class="unline">{{vm.startOper.nurseStr}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
            <div layout layout-align="space-between center">
                <div>第&nbsp;{{page.pageCur}}&nbsp;页</div>
                <div>{{vm.startOper.regOpt.operaDate}}</div>
            </div>
        </main>
    </div>
</div>