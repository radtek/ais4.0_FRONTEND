<div flex layout="column" id="oper">
    <form name="patInfo" role="form" novalidate class="panel panel-default">
        <div class="panel-heading">病人基本信息</div>
        <div class="wrap" layout layout-wrap="wrap">
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit"><em>*</em>姓名</label>
                    <input flex type="text" name="name" class="form-control" ng-model="patient.name" maxlength="20" ng-blur="_name = true" required>
                </div>
                <p ng-if="patInfo.name.$error.required && _name" class="help-block text-right">姓名不能为空</p>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit"><em>*</em>性别</label>
                    <select flex name="sex" class="form-control" ng-options="item for item in sexList" ng-model="patient.sex" ng-blur="_sex = true" required></select>
                </div>
                <p ng-if="patInfo.sex.$error.required && _sex" class="help-block text-right">请选择性别</p>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit"><em>*</em>年龄(岁)</label>
                    <input flex type="number" name="age" class="form-control" ng-model="patient.age" min="0" max="200" ng-blur="_age = true">
                </div>
                <p ng-if="!patient.age && !patient.ageMon && !patient.ageDay && _age" class="help-block text-right">(年/月/日)选填项，0~200</p>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">月</label>
                    <input flex type="number" name="ageMon" class="form-control" ng-model="patient.ageMon" min="0" max="11" ng-blur="_age = true">
                </div>
                <p ng-if="!patient.age && !patient.ageMon && !patient.ageDay && _age" class="help-block text-right">(年/月/日)选填项，0~11</p>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">天</label>
                    <input flex type="number" name="ageDay" class="form-control" ng-model="patient.ageDay" min="0" max="364" ng-blur="_age = true">
                </div>
                <p ng-if="!patient.age && !patient.ageMon && !patient.ageDay && _age" class="help-block text-right">(年/月/日)选填项，0~364</p>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">住院号</label>
                    <input flex type="text" name="hid" class="form-control" ng-model="patient.hid" maxlength="20">
                </div>
                <p ng-show="errPwd" class="help-block text-right">{{errPwd}}</p>
            </div>
            <div flex="20" class="input-wrap" ng-if="!docInfo.hideRegion" >
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">病区</label>
                    <oi-select flex name="region" oi-options="item.regionId as item.name for item in regionList | limitTo: 100" ng-model="patient.regionId" oi-select-options="{cleanModel: true}"></oi-select>
                </div>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">科室</label>
                    <oi-select flex name="dept" oi-options="item.deptId as item.name for item in deptList | limitTo: 100" oi-select-options="{ listFilter: 'oiSelectAscSort:[\'pinYin\']',cleanModel: true }" ng-model="patient.deptId"></oi-select>
                </div>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">床号</label>
                    <input flex type="text" name="bed" class="form-control" ng-model="patient.bed" maxlength="20">
                </div>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">费用类型</label>
                    <select flex name="medicalType" class="form-control"  ng-options="item for item in chargeType" ng-model="patient.medicalType" ><option value=""></option></select>
                </div>
                <p ng-show="errPwd" class="help-block text-right">{{errPwd}}</p>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">体重(KG)</label>
                    <input flex type="number" name="weight" class="form-control" ng-model="patient.weight" min="1" max="300">
                </div>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">HBsAg</label>
                    <select flex class="form-control" name="hbsag" ng-options="item for item in templete" ng-model="patient.hbsag" ><option value=""></option></select>
                </div>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">抗HCV</label>
                    <select class="form-control" flex name="hcv" ng-options="item for item in templete" ng-model="patient.hcv" ><option value=""></option></select>
                </div>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">抗HIV</label>
                    <select class="form-control" flex name="hiv" ng-options="item for item in templete" ng-model="patient.hiv" ><option value=""></option></select>
                </div>
            </div>
            <div flex="20" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">抗HP</label>
                    <select class="form-control" flex name="hp" ng-options="item for item in templete" ng-model="patient.hp" ><option value=""></option></select>
                </div>
            </div>
            <div flex class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">药物过敏史</label>
                    <input flex type="text" name="hypersusceptibility" class="form-control" ng-model="patient.hypersusceptibility" maxlength="200">
                </div>
            </div>
        </div>
    </form>
    <form name="operInfo" role="form" novalidate class="panel panel-default">
        <div class="panel-heading">会诊基本信息</div>
        <div class="wrap" layout layout-wrap="wrap">
            <div flex="25" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit"><em>*</em>会诊开始</label>
                    <input datetimepicker="" flex name="startTime" dateID="start-time" ng-model="patient.startTime" timepicker="false" format="Y-m-d" class="form-control" ng-blur="_startTime = true"></input>
                </div>
                <p ng-if="operInfo.startTime.$error.required && _startTime" class="help-block text-right">手术日期不能为空</p>
            </div>
            <div flex="25" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit"><em>*</em>会诊结束</label>
                    <input datetimepicker="" flex name="endTime" dateID="start-time" ng-model="patient.endTime" timepicker="false" format="Y-m-d" class="form-control" ng-blur="_endTime = true"></input>
                </div>
                <p ng-if="operInfo.endTime.$error.required && _endTime" class="help-block text-right">手术日期不能为空</p>
            </div>
            <div flex="25" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit"><em>*</em>手术等级</label>
                    <select flex class="form-control"  name="optLevel" ng-options="item for item in optLevelList" ng-model="patient.optLevel" ng-blur="_optLevel = true"  required ></select>
                </div>
                <p ng-if="operInfo.optLevel.$error.required && _optLevel" class="help-block text-right">手术等级不能为空</p>
            </div>
            <div flex="25" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit"><em>*</em>主刀医生</label>
                    <oi-select flex name="operatorId" oi-options="item.operatorId as item.name for item in getOperaList($query, patient.assistants) | limitTo: 100" oi-select-options="{listFilter: 'oiSelectAscSort:[\'pinYin\']'}" ng-model="patient.operatorId" ng-blur="operatorId = true" required>
                    </oi-select>
                </div>
                <p ng-if="operInfo.operatorId.$error.required && _operatorId" class="help-block text-right">主刀医生不能为空</p>
            </div>
            <div flex="40" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">助手医生</label>
                    <oi-select flex multiple name="assistants" oi-options="item.operatorId as item.name for item in getOperaList($query, patient.operatorId) | limitTo: 100" oi-select-options="{ listFilter: 'oiSelectAscSort:[\'pinYin\']', cleanModel: true}" ng-model="patient.assistants"></oi-select>
                </div>
            </div>
            <div flex="60" id="diagDiv" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit"><em>*</em>术前诊断</label>
                    <oi-select flex multiple class="multiline" name="diagnosisCodes" oi-options="item.name for item in getDiagnosedefList($query) | limitTo: 100" oi-select-options="{listFilter: 'oiSelectAscSort:[\'pinYin\']', editItem: true, newItem: true, newItemModel: {name: $query}}" ng-model="patient.diagnosisCodes" ng-blur="_diagnosisCodes = true;setDiagHeight($event);" required>
                    </oi-select>
                </div>
                <p ng-if="operInfo.diagnosisCodes.$error.required && _diagnosisCodes" class="help-block text-right">术前诊断不能为空</p>
            </div>
            <div flex="40" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit"><em>*</em>麻醉方法</label>
                    <oi-select flex multiple name="designedAnaesMethodCodes" oi-options="item.anaMedId as item.name for item in anaesMethodList | limitTo: 100" ng-model="patient.designedAnaesMethodCodes" ng-blur="_designedAnaesMethodCodes = true" required></oi-select>
                </div>
                <p ng-if="operInfo.designedAnaesMethodCodes.$error.required && _designedAnaesMethodCodes" class="help-block text-right">麻醉方法不能为空</p>
            </div>
            <div flex="60" id="desigDiv" class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">拟施手术</label>
                    <oi-select flex multiple class="multiline" name="designedOptCodes" oi-options="item.name for item in getOperdefList($query) | limitTo: 100" oi-select-options="{ listFilter: 'oiSelectAscSort:[\'pinYin\']', editItem: true, newItem: true, newItemModel: {name: $query} }" ng-model="patient.designedOptCodes" ng-blur="setDesigHeight($event);" required>
                    </oi-select>
                </div>
            </div>
            <div flex class="input-wrap">
                <div layout layout-align="start center" class="input-group">
                    <label class="tit">备注</label>
                    <input flex type="text" name="remark" class="form-control" ng-model="patient.remark" maxlength="200">
                </div>
            </div>
        </div>
    </form>
</div>